/**
 * Desktop only styles
 * The baseline styles are at _navigation-main--base.scss
 */
$layout-head--logo-grid--max-rows: 6;
$layout-head--logo-grid--max-columns: 5;
$layout-head--logo-grid--gutter: 1px;
$layout-head--logo-grid--width: 2px;

@include breakpoint($navigation-main--breakpoint--mobile + 1) {

    /**
     * :hover and active states
     */

    .navigation-main__item {
        &:hover {
            .navigation-main__link {
                background-color: color(1);
                color: color(2);
            }

            .navigation-main__l2__list {
                @include navigation-level--show;
            }
        }
    }

    .navigation-main__link {
        .navigation-main__item._is-active &,
        &:hover,
        &:focus {
            background-color: color(1);
            color: color(2);
        }
    }

    .navigation-main__l2__item {
        &:hover {
            .navigation-main__l3__list {
                @include navigation-level--show;
            }
        }
    }

    .navigation-main__l3__link {
        .navigation-main__l3__item._is-active &,
        &:hover {
            background-color: darken(color(5), 20%);
        }
    }

    /**
     * Default styles level 2 and level 3
     */

    .navigation-main__l2__link,
    .navigation-main__l3__link {
        @extend %navigation-main__link;
        white-space: nowrap;
    }

    .navigation-main__l2__link {

        // Add click indicator to links with children
        .navigation-main__l2__item._has-children & {
            @include icon(arrow-right, 0.7em, after);

            &:after {
                display: inline-block;
                position: absolute;
                right: em(12, size(7) * 0.7em);
                top: em(20, size(7) * 0.7em);
            }
        }

        // :hover and active state
        .navigation-main__l2__item._is-active &,
        &:hover {
            background-color: color(5);
        }

        &:hover + .navigation-main__l3__list {
            @include navigation-level--show;
        }
    }

    /**
     * Styling for special search link
     */

    .navigation-main__search__text {
        @include is-visually-hidden;
    }

    /**
     * Styling for special home link figure
     */

    .navigation-main__home__link {
        display: flex;
        align-items: center;
        font-size: 1em; // Reset inherited font-size
        width: em(50);
        height: em(50);
        padding: 0 em(5);
        background-color: color(2) !important; // Overwrite :hover color

        .no-flexbox & {
            padding-top: em(16);
        }

        // Users with a legacy browser need to find home another way
        .no-csstransforms,
        .lt-ie9 & {
            display: none;
        }
    }

    .navigation-main__home__text {
        @include is-visually-hidden;
    }

    .navigation-main__home__figure {
        margin: -$layout-head--logo-grid--width auto 0;
        width: $layout-head--logo-grid--max-columns * $layout-head--logo-grid--width + ($layout-head--logo-grid--max-columns - 1) * $layout-head--logo-grid--gutter;
        height: $layout-head--logo-grid--max-rows * $layout-head--logo-grid--width + ($layout-head--logo-grid--max-rows - 1) * $layout-head--logo-grid--gutter;
    }


    /**
     * Positions dots on a grid
     *
     * @param {integer} $top Vertical postition on the grid
     * @param {integer} $left Horizontal position on the grid
     */

    @mixin layout-head--logo-grid ($top, $left) {
        $position-top: $top * $layout-head--logo-grid--width + $top * $layout-head--logo-grid--gutter;
        $position-left: $left * $layout-head--logo-grid--width + $left * $layout-head--logo-grid--gutter;

        transform: translateX($position-left) translateY($position-top);
    }

    /**
     * Generates a shape by positioning small dots on a grid
     *
     * @param {list} $shape [(top, left), (top, left), ...]
     */
    @mixin layout-head--logo-generator ($shape) {
        $index: 1;

        @each $coords in $shape {

            &:nth-child(#{$index}) {
                $top: nth($coords, 1);
                $left: nth($coords, 2);

                @include layout-head--logo-grid($top, $left);
            }

            $index: $index + 1;
        }
    }

    // House shape
    $layout-head--logo-shape-home:
        (5,0),
        (5,4),
        (4,0),
        (5,1),
        (2,4),
        (4,4),
        (1,1),
        (2,3),
        (5,2),
        (3,4),
        (5,3),
        (3,0),
        (0,2),
        (1,2),
        (2,1),
        (2,2),
        (1,3),
        (2,0);

    // Arrow
    $layout-head--logo-shape-arrow:
        (2,0),
        (3,3),
        (5,1),
        (3,-1),
        (4,0),
        (5,1),
        (3,2),
        (4,0),
        (1,1),
        (3,1),
        (3,1),
        (2,0),
        (3,5),
        (3,-1),
        (1,1),
        (3,2),
        (3,3),
        (3,4);

    .navigation-main__home__figure__item {
        @include composited-layer;
        @include layout-head--logo-generator($layout-head--logo-shape-home);
        display: block;
        position: absolute;
        width: $layout-head--logo-grid--width;
        height: $layout-head--logo-grid--width;
        border-radius: $layout-head--logo-grid--width / 2;
        background-color: color(1);
        transition: transform 0.3s ease;

        .navigation-main__item:not(._is-active) .navigation-main__home__link:hover & {
            @include layout-head--logo-generator($layout-head--logo-shape-arrow);
        }
    }
}
